on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Service to Rollback'
        required: true
        default: 'FilesQL' 
        type: choice
        options:
        - analytics
        - biochem
        - chemspace
        - container
        - enzyme
        - files
        - instrument      
        - inventory
        - lcms
        - maldi
        - workflow
      rollback:
        description: 'True to enable rollback'
        required: true 
        type: boolean 
      tags:
        description: 'Hash to Rollback to!'
        required: false 
        type: string
      environment_builtin:
        description: 'Environment to Rollback!'
        type: environment
        required: true 

jobs:
  ecs-list:
    runs-on: ubuntu-latest
    if:  ${{ github.event.inputs.rollback == 'true' }} 
    steps:
      - name: LIST CLUSTERS!
        run: |
          aws ecs list-clusters
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          AWS_DEFAULT_REGION: 'us-east-1'
